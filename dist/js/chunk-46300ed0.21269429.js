(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46300ed0"],{"0fea":function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"k",(function(){return u})),n.d(e,"i",(function(){return l})),n.d(e,"l",(function(){return d})),n.d(e,"j",(function(){return m})),n.d(e,"q",(function(){return p})),n.d(e,"o",(function(){return f})),n.d(e,"m",(function(){return _})),n.d(e,"p",(function(){return h})),n.d(e,"n",(function(){return y})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return v})),n.d(e,"s",(function(){return g})),n.d(e,"v",(function(){return j})),n.d(e,"r",(function(){return O})),n.d(e,"c",(function(){return w})),n.d(e,"a",(function(){return k})),n.d(e,"d",(function(){return x})),n.d(e,"b",(function(){return C}));var s=n("b775"),r={sys_dict_page:"/admin/sys_dict_page",sys_dict_layer_top:"/admin/sys_dict_layer_top",sys_dict_add:"/admin/sys_dict_add",sys_dict_update:"/admin/sys_dict_update",sys_dict_delete:"/admin/sys_dict_remove",sys_permission_page:"/admin/sys_permission_page",sys_permission_add:"/admin/sys_permission_add",sys_permission_update:"/admin/sys_permission_update",sys_permission_delete:"/admin/sys_permission_remove",sys_role_page:"/admin/sys_role_page",sys_role_add:"/admin/sys_role_add",sys_role_update:"/admin/sys_role_update",sys_role_delete:"/admin/sys_role_delete",sys_permission_all:"/admin/sys_permission_all",sys_permission_layer_top:"/admin/sys_permission_layer_top",sys_user_page:"/admin/sys_user_page",sys_user_add:"/admin/sys_user_add",sys_user_update:"/admin/sys_user_update",sys_user_remove:"/admin/sys_user_remove",sys_role_layer_top:"/admin/sys_role_layer_top",user:"/admin/user",role:"/admin/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree"};function a(t){return Object(s["b"])({url:r.role,method:"get",params:t})}function i(t){return Object(s["b"])({url:r.service,method:"get",params:t})}function o(t){return Object(s["b"])({url:r.permissionNoPager,method:"get",params:t})}function c(t){return Object(s["b"])({url:r.orgTree,method:"get",params:t})}function u(t){return Object(s["b"])({url:r.sys_permission_page,method:"post",data:t})}function l(t){return Object(s["b"])({url:r.sys_permission_add,method:"post",data:t})}function d(t){return Object(s["b"])({url:r.sys_permission_update,method:"post",data:t})}function m(t){return Object(s["b"])({url:r.sys_permission_delete,method:"post",data:t})}function p(t){return Object(s["b"])({url:r.sys_permission_layer_top,method:"post",data:t})}function f(t){return Object(s["b"])({url:r.sys_role_page,method:"post",data:t})}function _(t){return Object(s["b"])({url:r.sys_role_add,method:"post",data:t})}function h(t){return Object(s["b"])({url:r.sys_role_update,method:"post",data:t})}function y(t){return Object(s["b"])({url:r.sys_role_delete,method:"post",data:t})}function b(t){return Object(s["b"])({url:r.sys_user_page,method:"post",data:t})}function v(t){return Object(s["b"])({url:r.sys_user_remove,method:"post",data:t})}function g(t){return Object(s["b"])({url:r.sys_user_add,method:"post",data:t})}function j(t){return Object(s["b"])({url:r.sys_user_update,method:"post",data:t})}function O(t){return Object(s["b"])({url:r.sys_role_layer_top,method:"post",data:t})}function w(t){return Object(s["b"])({url:r.sys_dict_page,method:"post",data:t})}function k(t){return Object(s["b"])({url:r.sys_dict_add,method:"post",data:t})}function x(t){return Object(s["b"])({url:r.sys_dict_update,method:"post",data:t})}function C(t){return Object(s["b"])({url:r.sys_dict_delete,method:"post",data:t})}},"88bc":function(t,e,n){(function(e){var n=1/0,s=9007199254740991,r="[object Arguments]",a="[object Function]",i="[object GeneratorFunction]",o="[object Symbol]",c="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")();function d(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function m(t,e){var n=-1,s=t?t.length:0,r=Array(s);while(++n<s)r[n]=e(t[n],n,t);return r}function p(t,e){var n=-1,s=e.length,r=t.length;while(++n<s)t[r+n]=e[n];return t}var f=Object.prototype,_=f.hasOwnProperty,h=f.toString,y=l.Symbol,b=f.propertyIsEnumerable,v=y?y.isConcatSpreadable:void 0,g=Math.max;function j(t,e,n,s,r){var a=-1,i=t.length;n||(n=x),r||(r=[]);while(++a<i){var o=t[a];e>0&&n(o)?e>1?j(o,e-1,n,s,r):p(r,o):s||(r[r.length]=o)}return r}function O(t,e){return t=Object(t),w(t,e,(function(e,n){return n in t}))}function w(t,e,n){var s=-1,r=e.length,a={};while(++s<r){var i=e[s],o=t[i];n(o,i)&&(a[i]=o)}return a}function k(t,e){return e=g(void 0===e?t.length-1:e,0),function(){var n=arguments,s=-1,r=g(n.length-e,0),a=Array(r);while(++s<r)a[s]=n[e+s];s=-1;var i=Array(e+1);while(++s<e)i[s]=n[s];return i[e]=a,d(t,this,i)}}function x(t){return A(t)||S(t)||!!(v&&t&&t[v])}function C(t){if("string"==typeof t||F(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}function S(t){return R(t)&&_.call(t,"callee")&&(!b.call(t,"callee")||h.call(t)==r)}var A=Array.isArray;function E(t){return null!=t&&$(t.length)&&!T(t)}function R(t){return P(t)&&E(t)}function T(t){var e=I(t)?h.call(t):"";return e==a||e==i}function $(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function I(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function P(t){return!!t&&"object"==typeof t}function F(t){return"symbol"==typeof t||P(t)&&h.call(t)==o}var L=k((function(t,e){return null==t?{}:O(t,m(j(e,1),C))}));t.exports=L}).call(this,n("c8ba"))},"8d18":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"角色ID"}},[n("a-input",{attrs:{placeholder:"请输入"}})],1)],1),n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"状态"}},[n("a-select",{attrs:{placeholder:"请选择","default-value":"0"}},[n("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),n("a-select-option",{attrs:{value:"1"}},[t._v("正常")]),n("a-select-option",{attrs:{value:"2"}},[t._v("禁用")])],1)],1)],1),n("a-col",{attrs:{md:8,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons"},[n("a-button",{attrs:{type:"primary"}},[t._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"}},[t._v("重置")])],1)])],1)],1)],1),n("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData},scopedSlots:t._u([{key:"expandedRowRender",fn:function(e){return n("div",{staticStyle:{margin:"0"}},[n("a-row",{style:{marginBottom:"12px"},attrs:{gutter:24}},t._l(e.permissions,(function(e,s){return n("a-col",{key:s,style:{marginBottom:"12px"},attrs:{span:12}},[n("a-col",{attrs:{span:4}},[n("span",[t._v(t._s(e.permissionName)+"：")])]),e.actionEntitySet.length>0?n("a-col",{attrs:{span:20}},t._l(e.actionEntitySet,(function(e,s){return n("a-tag",{key:s,attrs:{color:"cyan"}},[t._v(t._s(e.describe))])})),1):n("a-col",{attrs:{span:20}},[t._v("-")])],1)})),1)],1)}},{key:"action",fn:function(e,s){return n("span",{},[n("a",{on:{click:function(e){return t.$refs.modal.edit(s)}}},[t._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{attrs:{href:"javascript:;"}},[t._v("详情")])]),n("a-menu-item",[n("a",{attrs:{href:"javascript:;"}},[t._v("禁用")])]),n("a-menu-item",[n("a",{attrs:{href:"javascript:;"}},[t._v("删除")])])],1)],1)],1)}}])}),n("role-modal",{ref:"modal",on:{ok:t.handleOk}})],1)},r=[],a=(n("4160"),n("d81d"),n("159b"),n("2af9")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{title:"操作",width:800,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[n("a-steps",{attrs:{current:1}},[n("a-step",[n("template",{slot:"title"},[t._v(" Finished ")]),n("span",{attrs:{slot:"description"},slot:"description"},[t._v("This is a description.")])],2),n("a-step",{attrs:{title:"In Progress",description:"This is a description."}}),n("a-step",{attrs:{title:"Waiting",description:"This is a description."}})],1)],1)},o=[],c=(n("d3b7"),n("0fea")),u=n("88bc"),l=n.n(u),d={name:"RoleModal",data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),permissions:[]}},created:function(){this.loadPermissions()},methods:{add:function(){this.edit({id:0})},edit:function(t){var e=this;if(this.mdl=Object.assign({},t),this.visible=!0,this.mdl.permissions&&this.permissions){var n={};this.mdl.permissions.forEach((function(t){n[t.permissionId]=t.actionEntitySet.map((function(t){return t.action}))})),this.permissions.forEach((function(t){t.selected=n[t.id]||[]}))}this.$nextTick((function(){e.form.setFieldsValue(l()(e.mdl,"id","name","status","describe"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var t=this;this.form.validateFields((function(e,n){e||(t.confirmLoading=!0,new Promise((function(t){setTimeout((function(){return t()}),2e3)})).then((function(){t.$message.success("保存成功"),t.$emit("ok")})).catch((function(){})).finally((function(){t.confirmLoading=!1,t.close()})))}))},handleCancel:function(){this.close()},onChangeCheck:function(t){t.indeterminate=!!t.selected.length&&t.selected.length<t.actionsOptions.length,t.checkedAll=t.selected.length===t.actionsOptions.length},onChangeCheckAll:function(t,e){Object.assign(e,{selected:t.target.checked?e.actionsOptions.map((function(t){return t.value})):[],indeterminate:!1,checkedAll:t.target.checked})},loadPermissions:function(){var t=this;Object(c["f"])().then((function(e){var n=e.result;t.permissions=n.map((function(t){var e=JSON.parse(t.actionData)||[];return t.checkedAll=!1,t.selected=[],t.indeterminate=!1,t.actionsOptions=e.map((function(t){return{label:t.describe,value:t.action}})),t}))}))}}},m=d,p=n("2877"),f=Object(p["a"])(m,i,o,!1,null,"3fba7454",null),_=f.exports,h={name:"TableList",components:{STable:a["m"],RoleModal:_},data:function(){var t=this;return{description:"列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。",visible:!1,form:null,mdl:{},advanced:!1,queryParam:{},columns:[{title:"唯一识别码",dataIndex:"id"},{title:"角色名称",dataIndex:"name"},{title:"状态",dataIndex:"status"},{title:"创建时间",dataIndex:"createTime",sorter:!0},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return t.$http.get("/role",{params:Object.assign(e,t.queryParam)}).then((function(t){return t.result}))},selectedRowKeys:[],selectedRows:[]}},methods:{handleEdit:function(t){this.mdl=Object.assign({},t),this.mdl.permissions.forEach((function(t){t.actionsOptions=t.actionEntitySet.map((function(t){return{label:t.describe,value:t.action,defaultCheck:t.defaultCheck}}))})),this.visible=!0},handleOk:function(){this.$refs.table.refresh()},onChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},toggleAdvanced:function(){this.advanced=!this.advanced}},watch:{}},y=h,b=Object(p["a"])(y,s,r,!1,null,null,null);e["default"]=b.exports}}]);