(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b51868c6"],{"0d62":function(t,e,a){},"0fea":function(t,e,a){"use strict";a.d(e,"g",(function(){return s})),a.d(e,"h",(function(){return o})),a.d(e,"f",(function(){return d})),a.d(e,"e",(function(){return r})),a.d(e,"k",(function(){return l})),a.d(e,"i",(function(){return u})),a.d(e,"l",(function(){return c})),a.d(e,"j",(function(){return _})),a.d(e,"q",(function(){return p})),a.d(e,"o",(function(){return m})),a.d(e,"m",(function(){return h})),a.d(e,"p",(function(){return g})),a.d(e,"n",(function(){return f})),a.d(e,"t",(function(){return b})),a.d(e,"u",(function(){return y})),a.d(e,"s",(function(){return D})),a.d(e,"v",(function(){return v})),a.d(e,"r",(function(){return k})),a.d(e,"c",(function(){return j})),a.d(e,"a",(function(){return O})),a.d(e,"d",(function(){return x})),a.d(e,"b",(function(){return w}));var i=a("b775"),n={sys_dict_page:"/admin/sys_dict_page",sys_dict_layer_top:"/admin/sys_dict_layer_top",sys_dict_add:"/admin/sys_dict_add",sys_dict_update:"/admin/sys_dict_update",sys_dict_delete:"/admin/sys_dict_remove",sys_permission_page:"/admin/sys_permission_page",sys_permission_add:"/admin/sys_permission_add",sys_permission_update:"/admin/sys_permission_update",sys_permission_delete:"/admin/sys_permission_remove",sys_role_page:"/admin/sys_role_page",sys_role_add:"/admin/sys_role_add",sys_role_update:"/admin/sys_role_update",sys_role_delete:"/admin/sys_role_delete",sys_permission_all:"/admin/sys_permission_all",sys_permission_layer_top:"/admin/sys_permission_layer_top",sys_user_page:"/admin/sys_user_page",sys_user_add:"/admin/sys_user_add",sys_user_update:"/admin/sys_user_update",sys_user_remove:"/admin/sys_user_remove",sys_role_layer_top:"/admin/sys_role_layer_top",user:"/admin/user",role:"/admin/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree"};function s(t){return Object(i["b"])({url:n.role,method:"get",params:t})}function o(t){return Object(i["b"])({url:n.service,method:"get",params:t})}function d(t){return Object(i["b"])({url:n.permissionNoPager,method:"get",params:t})}function r(t){return Object(i["b"])({url:n.orgTree,method:"get",params:t})}function l(t){return Object(i["b"])({url:n.sys_permission_page,method:"post",data:t})}function u(t){return Object(i["b"])({url:n.sys_permission_add,method:"post",data:t})}function c(t){return Object(i["b"])({url:n.sys_permission_update,method:"post",data:t})}function _(t){return Object(i["b"])({url:n.sys_permission_delete,method:"post",data:t})}function p(t){return Object(i["b"])({url:n.sys_permission_layer_top,method:"post",data:t})}function m(t){return Object(i["b"])({url:n.sys_role_page,method:"post",data:t})}function h(t){return Object(i["b"])({url:n.sys_role_add,method:"post",data:t})}function g(t){return Object(i["b"])({url:n.sys_role_update,method:"post",data:t})}function f(t){return Object(i["b"])({url:n.sys_role_delete,method:"post",data:t})}function b(t){return Object(i["b"])({url:n.sys_user_page,method:"post",data:t})}function y(t){return Object(i["b"])({url:n.sys_user_remove,method:"post",data:t})}function D(t){return Object(i["b"])({url:n.sys_user_add,method:"post",data:t})}function v(t){return Object(i["b"])({url:n.sys_user_update,method:"post",data:t})}function k(t){return Object(i["b"])({url:n.sys_role_layer_top,method:"post",data:t})}function j(t){return Object(i["b"])({url:n.sys_dict_page,method:"post",data:t})}function O(t){return Object(i["b"])({url:n.sys_dict_add,method:"post",data:t})}function x(t){return Object(i["b"])({url:n.sys_dict_update,method:"post",data:t})}function w(t){return Object(i["b"])({url:n.sys_dict_delete,method:"post",data:t})}},"4b07":function(t,e,a){"use strict";var i=a("0d62"),n=a.n(i);n.a},"5ed2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dataBody"},[a("a-form",{attrs:{layout:"inline"}},[a("a-form-item",[a("a-input",{attrs:{placeholder:"请输入名称",allowClear:!0},model:{value:t.queryData.name,callback:function(e){t.$set(t.queryData,"name",e)},expression:"queryData.name"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[a("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:t.fetch_no_page}},[t._v(" 查询 ")])],1)],1),a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:t.addData}},[t._v("添加")])],1),a("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading,indentSize:15,childrenColumnName:"childs"},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e){return[a("div",{staticStyle:{width:"110px"}},[a("a",{staticStyle:{"padding-right":"5px"},on:{click:function(a){return t.handleAddChild({parent_id:e.id})}}},[t._v("添加下级")]),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{staticStyle:{color:"#1890ff"},on:{click:function(a){return t.handleEdit(e)}}},[t._v("编辑")])]),a("a-menu-item",[a("a",{staticStyle:{color:"#f5222d"},on:{click:function(a){return t.handleDelete(e)}}},[t._v("删除")])])],1)],1)],1)]}}])}),t.visible?a("a-modal",{attrs:{title:"add"===t.dialogMode?"添加":"编辑",cancelText:"取消",okText:"确定",width:500,maskClosable:!1},on:{ok:t.handleAddData},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form",t._b({attrs:{labelAlign:"right"}},"a-form",{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20}}},!1),[a("a-form-item",{attrs:{label:t.dialogData.is_menu?"菜单名称":"权限名称"}},[a("a-input",{attrs:{placeholder:t.dialogData.is_menu?"菜单名称":"权限名称"},model:{value:t.dialogData.name,callback:function(e){t.$set(t.dialogData,"name",e)},expression:"dialogData.name"}})],1),a("a-form-item",{attrs:{label:"父级(选填)"}},[a("a-input",{attrs:{placeholder:"父级id"},model:{value:t.dialogData.parent_id,callback:function(e){t.$set(t.dialogData,"parent_id",e)},expression:"dialogData.parent_id"}}),a("a-tag",[t._v("权限集")]),t.loading_all_res?a("a-spin"):t._e(),a("a-tree",{attrs:{disabled:t.loading_all_res,"replace-fields":{children:"childs",title:"name",key:"id"},"auto-expand-parent":!0,"tree-data":t.all_res,checkable:"",checkStrictly:!0},on:{check:t.onResCheck},model:{value:t.dialogData.resource_ids,callback:function(e){t.$set(t.dialogData,"resource_ids",e)},expression:"dialogData.resource_ids"}})],1),a("a-form-item",{attrs:{label:"标识"}},[a("a-input",{attrs:{placeholder:"菜单、权限标识"},model:{value:t.dialogData.permission,callback:function(e){t.$set(t.dialogData,"permission",e)},expression:"dialogData.permission"}})],1),a("a-form-item",{attrs:{label:"是否菜单"}},[a("a-row",[a("a-col",[a("a-switch",{attrs:{"checked-children":"菜单","un-checked-children":"权限"},on:{change:function(e){!1===e&&(t.dialogData.path="")}},model:{value:t.dialogData.is_menu,callback:function(e){t.$set(t.dialogData,"is_menu",e)},expression:"dialogData.is_menu"}})],1),a("a-col",[a("a-input",{attrs:{disabled:!t.dialogData.is_menu,placeholder:"填写路径为菜单！"},model:{value:t.dialogData.path,callback:function(e){t.$set(t.dialogData,"path",e)},expression:"dialogData.path"}})],1)],1)],1)],1)],1):t._e()],1)},n=[],s=(a("d3b7"),a("5530")),o=a("0fea"),d=a("25a9"),r=[{title:"id",dataIndex:"id"},{title:"名称",dataIndex:"name"},{title:"权限标识",dataIndex:"permission"},{title:"路由",dataIndex:"path"},{title:"创建时间",dataIndex:"create_date"},{title:"操作",scopedSlots:{customRender:"action"}}],l={mounted:function(){this.fetch()},data:function(){return{data:[],pagination:{},loading:!1,columns:r,queryData:{id:null,name:null,page_no:1,page_size:5},dialogData:{id:null,value:null,is_menu:!1,resource_ids:[]},visible:!1,dialogMode:"add",all_res:[],loading_all_res:!1}},methods:{handleTableChange:function(t,e,a){var i=Object(s["a"])({},this.pagination);i.current=t.current,i.pageSize=5,this.pagination=i,this.queryData.page_no=t.current,this.fetch()},fetch_no_page:function(){this.pagination.current=1,this.queryData.page_no=1,this.queryData.page_size=5,this.fetch()},fetch:function(){var t=this;this.loading=!0;var e=Object.assign({},this.queryData);null!=e.time_start&&(e.time_start=e.time_start.format("YYYY-MM-DDThh:mm:ss")),null!=e.time_end&&(e.time_end=e.time_end.format("YYYY-MM-DDThh:mm:ss")),Object(o["k"])(e).then((function(e){var a=Object(s["a"])({},t.pagination);t.loading=!1,t.data=e.data.records,a.total=e.data.total,a.pageSize=e.data.page_size,t.pagination=a}))},addData:function(){this.handleDialogCancel(),this.getAllRes(),this.visible=!0,this.dialogMode="add"},handleAddData:function(){var t=this;!1===this.dialogData.is_menu&&(this.dialogData.path=null),"add"===this.dialogMode?Object(o["i"])(this.dialogData).then((function(e){Object(d["a"])(t,e),t.visible=!1,t.fetch()})):"edit"===this.dialogMode&&Object(o["l"])(this.dialogData).then((function(e){t.visible=!1,t.fetch()}))},handleAddChild:function(t){this.getAllRes(),this.visible=!0,this.dialogMode="add",this.dialogData=Object.assign({is_menu:null===t.path,resource_ids:[]},t),""===this.dialogData.parent_id&&(this.dialogData.parent_id=null),null!==t.parent_id&&(this.dialogData.resource_ids=[t.parent_id])},handleEdit:function(t){this.getAllRes(t.id),this.visible=!0,this.dialogMode="edit",this.dialogData=Object.assign({is_menu:null===t.path,resource_ids:[]},t),null!==t.parent_id&&(this.dialogData.resource_ids=[t.parent_id]),""===this.dialogData.parent_id&&(this.dialogData.parent_id=null),null===this.dialogData.path?this.dialogData.is_menu=!1:this.dialogData.is_menu=!0},handleDelete:function(t){var e=this;this.$confirm({title:"你确定要删除?",content:"你确定要删除！",onOk:function(){Object(o["j"])(t).then((function(t){Object(d["a"])(e,t),e.visible=!1,e.fetch()}))},onCancel:function(){},class:"test"})},handleDialogCancel:function(){this.dialogData={id:null,remark:null,value:null,is_menu:!1,resource_ids:[]}},onResCheck:function(t){var e=t.checked.length;e>=1?(this.dialogData.resource_ids={checked:[t.checked[e-1]],halfChecked:[]},this.dialogData.parent_id=t.checked[e-1]):(this.dialogData.resource_ids=[],this.dialogData.parent_id=null)},getAllRes:function(t){var e=this;this.loading_all_res=!0,Object(o["q"])({}).then((function(a){e.loading_all_res=!1;for(var i=[],n=0;n<a.data.length;n++){var s=a.data[n];void 0!==t&&null!==t&&s.id===t||i.push(s)}e.all_res=i})).catch((function(t){e.loading_all_res=!1}))}}},u=l,c=(a("4b07"),a("2877")),_=Object(c["a"])(u,i,n,!1,null,null,null);e["default"]=_.exports}}]);